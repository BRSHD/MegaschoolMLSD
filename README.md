# Описание диаграмм

Сервис, который принимает изображение диаграммы (BPMN/блок‑схема), извлекает узлы/стрелки/текст и возвращает пошаговое описание алгоритма на русском.  
CV‑часть делает детекцию блоков и OCR, строится граф и описывается LLM (TinyLlama).

## Возможности
- Загрузка PNG/JPG через простой веб‑интерфейс
- Распознавание блоков, стрелок и текста
- Построение графа и генерация описания алгоритма
- FastAPI + простой UI
- Поддержка GPU (ориентация на скорость ≤ 20 сек)

## Архитектура 
1. Пользователь загружает изображение
2. CV‑модуль детектирует узлы, стрелки, подписи → JSON
3. Построение графа и связей
4. Генерация текста описания LLM
5. Выдача результата через API/UI

## Требования
- Python 3.11
- CUDA + GPU 
- Установленные зависимости из `requirements.txt`

## Модели (не в репозитории)
В репозиторий не включены тяжёлые файлы.

Положите модели в:
- `models/cv/best.pt` — веса детектора
- `models/tinyllama.gguf` — GGUF модель TinyLlama

## Установка (локально)
1. Создать и активировать окружение
```bash
python -m venv venv
source venv/bin/activate
```
2. Установить зависимости
```bash
pip install -r requirements.txt
```
3. Положить модели в папку `models/`
4. Запустить сервис
```bash
uvicorn app.main:app --reload
```

### API

POST /api/analyze — загрузка изображения (multipart/form-data, file)
POST /api/describe — JSON от CV (для отладки)
GET /health — статус

### Docker

Если используете Docker:

```bash
docker compose up --build
```
